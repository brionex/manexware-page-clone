---
import { Image } from 'astro:assets'
import LogoManexwere from '../assets/Manexware.png'
import Nav from './Nav.astro'
---

<header class="py-2 sticky top-0 z-10 text-gray-500 bg-white">
  <div class="flex gap-10 px-5 lg:px-10">
    <figure class="max-w-[150px] min-w-[100px] flex items-center">
      <a href="/">
        <Image src={LogoManexwere} alt="logo-manexware-ERP-CRM" />
      </a>
    </figure>
    <Nav />
  </div>
</header>

<style>
  header {
    animation: addShadow;
    animation-timeline: scroll(root block);
  }

  @keyframes addShadow {
    50% {
      box-shadow: 0 10px 50px #ddd7;
    }
    100% {
      box-shadow: 0 10px 50px #ddd7;
    }
  }
</style>

<!-- TODO: Arreglar esta funcionalidad de mantener el link activo -->
<script>
  ;(() => {
    const $input = document.getElementById('chk') as HTMLInputElement
    const $links = document.querySelector('.nav-links')
    const linksLi = $links?.children as HTMLCollection
    let linkActive = linksLi[0]

    $links?.addEventListener('click', (e) => {
      const target = e.target as HTMLElement
      const $li = target.closest('li')

      if ($li) {
        linkActive.classList.remove('text-black')
        $li.classList.add('text-black')
        linkActive = $li
      }
    })

    if (!$input) return

    window.addEventListener('resize', () => {
      if (innerWidth > 1024) {
        $input.checked = false
      }
    })
  })()
</script>
